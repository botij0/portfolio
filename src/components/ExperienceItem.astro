---
interface Props {
    title: string;
    description: string;
    link?: string;
    date: string;
    company: string;
}

const { title, description, link, date, company } = Astro.props;
---

<div
    class="relative mx-4 pb-8 group transition-all duration-500 ease-in-out hover:scale-[1.02]
    before:absolute before:left-[-35px] before:block before:h-full before:w-0.5
    before:bg-primary/20 before:content-['']
    md:mx-12 md:pb-12 md:grid md:grid-cols-5 md:gap-8"
>
    <!-- Timeline dot with glow effect -->
    <div
        class="absolute -left-[46px] top-2 w-6 h-6 bg-primary flex items-center justify-center
        rounded-full shadow-lg shadow-primary/30 bg-primary/70 sm:ring-8 ring-primaryDark/50 shrink-0
        group-hover:shadow-primary/70 group-hover:scale-110 transition-all duration-300
        before:absolute before:inset-0 before:rounded-full before:animate-ping"
    >
        <svg
            class="w-2.5 h-2.5 text-secondary"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20"
        >
            <path
                d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
            ></path>
        </svg>
    </div>

    <!-- Left side - Job info -->
    <div class="relative pb-8 md:col-span-2 md:pb-0">
        <div class="sticky top-4">
            <!-- Job Title -->
            <h3
                class="text-xl md:text-2xl font-bold bg-gradient-to-r from-primary to-primaryDark
                bg-clip-text text-transparent mb-2 leading-tight"
            >
                {title}
            </h3>

            <!-- Company Name -->
            <h4 class="font-semibold text-lg md:text-xl text-primaryDark mb-3">
                {company}
            </h4>

            <!-- Date with modern styling -->
            <time
                class="inline-flex items-center px-3 py-1 text-sm font-medium
                bg-gradient-to-br from-primary/5 to-primaryDark/5 backdrop-blur-sm
                text-secondary rounded-full border border-primary/50 shadow-md shadow-primaryDark/20
                hover:shadow-md transition-all duration-300 group-hover:shadow-primary/20 group-hover:border-primary/70"
            >
                <svg
                    class="w-4 h-4 mr-2 opacity-60"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                >
                    <path
                        fill-rule="evenodd"
                        d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                        clip-rule="evenodd"></path>
                </svg>
                {date}
            </time>
        </div>
    </div>

    <!-- Right side - Description and link -->
    <div class="relative flex flex-col gap-4 md:col-span-3">
        <!-- Modern card container -->
        <div
            class="relative p-6 rounded-2xl bg-gradient-to-br from-primary/5 to-primaryDark/5 backdrop-blur-sm border
            border-primary/50 shadow-lg shadow-primaryDark/20 group-hover:shadow-xl group-hover:shadow-primaryDark/30
            group-hover:border-primary/70 transition-all duration-500"
        >
            <!-- Subtle gradient overlay -->
            <div
                class="absolute inset-0 rounded-2xl bg-gradient-to-br from-primary/5 to-transparent opacity-0
                group-hover:opacity-100 transition-opacity duration-500"
            >
            </div>

            <!-- Description -->
            <div
                class="relative z-10 mb-4 text-base leading-relaxed text-secondary/90
                group-hover:text-secondary/100 transition-colors duration-300"
                title={description.length > 150 ? description : undefined}
            >
                {
                    description.length > 150
                        ? `${description.substring(0, 150)}...`
                        : description
                }
            </div>
        </div>
    </div>
</div>

<style>
    @keyframes shimmer {
        100% {
            transform: translateX(100%) skewX(-12deg);
        }
    }
</style>
