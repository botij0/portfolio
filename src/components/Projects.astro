---
import GitHub from "./icons/Github.astro";
import NextJS from "./icons/NextJS.astro";
import Tailwind from "./icons/Tailwind.astro";
import Spring from "./icons/Spring.astro";
import Azure from "./icons/Azure.astro";
import PostgreSQL from "./icons/PostgreSQL.astro";
import Thymeleaf from "./icons/Thymeleaf.astro";
import Bootstrap from "./icons/Bootstrap.astro";
import JQuery from "./icons/JQuery.astro";
import MySQL from "./icons/MySQL.astro";
import LinkButton from "./LinkButton.astro";
import Link from "./icons/Link.astro";

const TAGS = {
    NEXT: {
        name: "Next.js",
        class: "bg-gradient-to-r from-black to-gray-800 text-white border-gray-600",
        icon: NextJS,
    },
    TAILWIND: {
        name: "Tailwind CSS",
        class: "bg-gradient-to-r from-[#003159] to-[#0ea5e9] text-white border-[#0ea5e9]",
        icon: Tailwind,
    },
    SPRING: {
        name: "Spring",
        class: "bg-gradient-to-r from-[#6DB33F] to-[#68a063] text-white border-[##6DB33F]",
        icon: Spring,
    },
    POSTGRESQL: {
        name: "PostgreSQL",
        class: "bg-gradient-to-r from-[#336791] to-[#4c9cd1] text-white border-[#336791]",
        icon: PostgreSQL,
    },
    AZURE: {
        name: "Azure",
        class: "bg-gradient-to-r from-[#00abf0] to-[#40c9ff] text-white border-[#00abf0]",
        icon: Azure,
    },
    BOOTSTRAP: {
        name: "Bootstrap",
        class: "bg-gradient-to-r from-[#7962b3] to-[#9575cd] text-white border-[#7962b3]",
        icon: Bootstrap,
    },
    JQUERY: {
        name: "jQuery",
        class: "bg-gradient-to-r from-[#0769ad] to-[#1976d2] text-white border-[#0769ad]",
        icon: JQuery,
    },
    THYMELEAF: {
        name: "Thymeleaf",
        class: "bg-gradient-to-r from-[#005F0F] to-[#2e7d32] text-white border-[#005F0F]",
        icon: Thymeleaf,
    },
    MYSQL: {
        name: "MySQL",
        class: "bg-gradient-to-r from-[#6c82a6] to-[#8297b8] text-white border-[#6c82a6]",
        icon: MySQL,
    },
};

const PROJECTS = [
    {
        title: "F1 Agile Portal - Portal F1 2023/2024",
        description:
            "Proyecto de portal web para la F1 2023/2024 siguiendo metodologías ágiles (Scrum) y con un diseño responsive. Realizado por un equipo de 5 personas para una asignatura del máster DASW de la UAH. Desplegado el front en Vercel y el Back en Azure (Es posible que la primera vez que se entre en el sitio web no funcione correctamente porque se estará deplegando la instancia de Azure). ",
        image: "f1_portal.webp",
        link: "https://f1-frontend-flax.vercel.app/",
        github: "https://github.com/Javier-Gonzalez-Soldado/F1-Met-AG-",
        tags: [
            TAGS.NEXT,
            TAGS.SPRING,
            TAGS.TAILWIND,
            TAGS.AZURE,
            TAGS.POSTGRESQL,
        ],
    },
    {
        title: "FilmSpringnitty - Portal de películas y críticas",
        description:
            "Proyecto de portal web clon de FilmAffinity. Realizado para la asignatura Frameworks Backend y Microservicios del máster DASW de la UAH. Tecnologías utilizadas: Spring Boot, Java, Thymeleaf, HTML, CSS, JavaScript, MySQL.",
        image: "filmspringnitty.webp",
        github: "https://github.com/Javier-Gonzalez-Soldado/FilmSpringnitty",
        tags: [
            TAGS.SPRING,
            TAGS.THYMELEAF,
            TAGS.BOOTSTRAP,
            TAGS.JQUERY,
            TAGS.MYSQL,
        ],
    },
];
---

<!-- Modern Grid Container -->
<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 max-w-7xl mx-auto">
    {
        PROJECTS.map((project, index) => (
            <article class={`group relative transform transition-all duration-700 ease-out hover:scale-[1.02] ${index % 2 === 0 ? 'md:translate-y-0' : 'md:translate-y-8'}`}>
                <!-- Main Card Container -->
                <div class="relative bg-gradient-to-br from-white/5 to-white/10 dark:from-gray-800/30 dark:to-gray-900/30
                    backdrop-blur-sm border border-white/10 dark:border-gray-700/50 rounded-3xl overflow-hidden
                    shadow-xl shadow-black/5 dark:shadow-black/20
                    group-hover:shadow-2xl group-hover:shadow-black/10 dark:group-hover:shadow-black/30
                    group-hover:border-accentLime/20 transition-all duration-500">

                    <!-- Subtle gradient overlay -->
                    <div class="absolute inset-0 bg-gradient-to-br from-accentLime/5 to-transparent opacity-0
                        group-hover:opacity-100 transition-opacity duration-500 z-10"></div>

                    <!-- Image Container -->
                    <div class="relative h-64 md:h-56 lg:h-64 overflow-hidden">
                        <!-- Image overlay for better text readability -->
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent z-20"></div>

                        <img
                            alt={`${project.title} preview`}
                            class="w-full h-full object-cover object-top transition-all duration-700
                                group-hover:scale-110 group-hover:brightness-110"
                            loading="lazy"
                            src={project.image}
                        />

                        <!-- Floating action buttons -->
                        <div class="absolute top-4 right-4 flex gap-2 z-30 opacity-0 group-hover:opacity-100
                            transform translate-y-4 group-hover:translate-y-0 transition-all duration-500 delay-100">
                            {project.github && (
                                <a
                                    href={project.github}
                                    class="flex items-center justify-center w-10 h-10 bg-black/80 backdrop-blur-sm
                                    text-white rounded-full hover:bg-black hover:scale-110 transition-all duration-300
                                    shadow-lg shadow-black/25"
                                    title="View Source Code"
                                >
                                    <GitHub class="w-5 h-5" />
                                </a>
                            )}
                            {project.link && (
                                <a
                                    href={project.link}
                                    class="flex items-center justify-center w-10 h-10 bg-accentLime/90 backdrop-blur-sm
                                    text-white rounded-full hover:bg-accentLime hover:scale-110 transition-all duration-300
                                    shadow-lg shadow-accentLime/25"
                                    title="Live Preview"
                                >
                                    <Link class="w-4 h-4" />
                                </a>
                            )}
                        </div>
                    </div>

                    <!-- Card Content -->
                    <div class="relative z-20 p-6 space-y-4">
                        <!-- Project Title -->
                        <h3 class="text-xl lg:text-2xl font-bold bg-gradient-to-r from-accentLime to-green-400
                            bg-clip-text text-transparent leading-tight group-hover:from-accentLime group-hover:to-lime-300
                            transition-all duration-300">
                            {project.title}
                        </h3>

                        <!-- Technology Tags -->
                        <div class="flex flex-wrap gap-2">
                            {project.tags.map((tag) => (
                                <span class={`
                                    inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium rounded-full
                                    ${tag.class} border shadow-sm
                                    hover:scale-105 hover:shadow-md transition-all duration-300 cursor-default
                                `}>
                                    <tag.icon class="w-3 h-3" />
                                    {tag.name}
                                </span>
                            ))}
                        </div>

                        <!-- Project Description -->
                        <div class="text-sm lg:text-base leading-relaxed text-gray-700 dark:text-gray-300
                            group-hover:text-gray-900 dark:group-hover:text-gray-100 transition-colors duration-300"
                            title={project.description.length > 120 ? project.description : undefined}>
                            {
                                project.description.length > 120
                                    ? `${project.description.substring(0, 120)}...`
                                    : project.description
                            }
                        </div>

                        <!-- Action buttons -->
                        <div class="flex items-center gap-3 pt-2">
                            {project.github && (
                                <a
                                    href={project.github}
                                    class="inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-300
                                    bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200 dark:border-gray-600
                                    hover:bg-white dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white
                                    hover:scale-105 hover:shadow-lg transition-all duration-300 group/btn"
                                >
                                    <GitHub class="w-4 h-4 mr-2 group-hover/btn:rotate-12 transition-transform duration-300" />
                                    Code
                                </a>
                            )}
                            {project.link && (
                                <a
                                    href={project.link}
                                    class="inline-flex items-center px-4 py-2 text-sm font-semibold text-white
                                    bg-gradient-to-r from-accentLime/90 to-green-500/90 rounded-xl border border-accentLime/30
                                    hover:from-accentLime hover:to-green-500 hover:scale-105 hover:shadow-xl hover:shadow-accentLime/25
                                    transition-all duration-300 group/btn"
                                >
                                    <Link class="w-4 h-4 mr-2 group-hover/btn:translate-x-1 transition-transform duration-300" />
                                    Preview
                                </a>
                            )}
                        </div>
                    </div>

                    <!-- Decorative elements -->
                    <div class="absolute -bottom-2 -right-2 w-24 h-24 bg-gradient-to-br from-accentLime/10 to-green-400/10
                        rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="absolute -top-2 -left-2 w-16 h-16 bg-gradient-to-br from-blue-400/10 to-purple-400/10
                        rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-700 delay-200"></div>
                </div>
            </article>
        ))
    }
</div>

<style>
    /* Add custom scrollbar for better aesthetics */
    * {
        scrollbar-width: thin;
        scrollbar-color: rgba(132, 204, 22, 0.3) transparent;
    }

    *::-webkit-scrollbar {
        width: 6px;
    }

    *::-webkit-scrollbar-track {
        background: transparent;
    }

    *::-webkit-scrollbar-thumb {
        background-color: rgba(132, 204, 22, 0.3);
        border-radius: 3px;
    }

    *::-webkit-scrollbar-thumb:hover {
        background-color: rgba(132, 204, 22, 0.5);
    }
</style>
