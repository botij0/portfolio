---
import LinkButton from "@/components/LinkButton.astro";

import LinkIcon from "@/components/icons/common/LinkIcon.astro";
import MySQLIcon from "@/components/icons/db/MySQLIcon.astro";
import AzureIcon from "@/components/icons/devops/AzureIcon.astro";
import GitHubIcon from "@/components/icons/devops/GithubIcon.astro";
import NextJSIcon from "@/components/icons/frontend/NextJSIcon.astro";
import SpringIcon from "@/components/icons/backend/SpringIcon.astro";
import JQueryIcon from "@/components/icons/frontend/JQueryIcon.astro";
import TailwindIcon from "@/components/icons/frontend/TailwindIcon.astro";
import ThymeleafIcon from "@/components/icons/frontend/ThymeleafIcon.astro";
import BootstrapIcon from "@/components/icons/frontend/BootstrapIcon.astro";
import PostgreSQLIcon from "@/components/icons/db/PostgreSQLIcon.astro";

const TAGS = {
    NEXT: {
        name: "Next.js",
        class: "bg-gradient-to-r from-black/40 to-gray-950/40 text-secondary border-black",
        icon: NextJSIcon,
    },
    TAILWIND: {
        name: "Tailwind CSS",
        class: "bg-gradient-to-r from-teal-950/20 to-teal-800/20 text-secondary border-teal-950",
        icon: TailwindIcon,
    },
    SPRING: {
        name: "Spring",
        class: "bg-gradient-to-r from-green-950/20 to-green-800/20 text-secondary border-green-950",
        icon: SpringIcon,
    },
    POSTGRESQL: {
        name: "PostgreSQL",
        class: "bg-gradient-to-r from-blue-950/20 to-blue-800/20 text-secondary border-blue-950",
        icon: PostgreSQLIcon,
    },
    AZURE: {
        name: "Azure",
        class: "bg-gradient-to-r from-indigo-950/20 to-indigo-800/20 text-secondary border-indigo-950",
        icon: AzureIcon,
    },
    BOOTSTRAP: {
        name: "Bootstrap",
        class: "bg-gradient-to-r from-purple-950/20 to-purple-800/20 text-secondary border-purple-950",
        icon: BootstrapIcon,
    },
    JQUERY: {
        name: "jQuery",
        class: "bg-gradient-to-r from-cyan-950/20 to-cyan-800/20 text-secondary border-cyan-950",
        icon: JQueryIcon,
    },
    THYMELEAF: {
        name: "Thymeleaf",
        class: "bg-gradient-to-r from-emerald-950/20 to-emerald-800/20 text-secondary border-emerald-950",
        icon: ThymeleafIcon,
    },
    MYSQL: {
        name: "MySQL",
        class: "bg-gradient-to-r from-slate-500/20 to-slate-700/20 text-secondary border-slate-600",
        icon: MySQLIcon,
    },
};

const PROJECTS = [
    {
        title: "F1 Agile Portal",
        subtitle: "Portal F1 2023/2024",
        description:
            "Proyecto de portal web para la F1 2023/2024 siguiendo metodologías ágiles (Scrum) y con un diseño responsive. Realizado por un equipo de 5 personas para una asignatura del máster DASW de la UAH. Desplegado el front en Vercel y el Back en Azure (Es posible que la primera vez que se entre en el sitio web no funcione correctamente porque se estará deplegando la instancia de Azure). ",
        image: "https://placehold.co/400",
        link: "https://f1-frontend-flax.vercel.app/",
        github: "https://github.com/Javier-Gonzalez-Soldado/F1-Met-AG-",
        tags: [
            TAGS.NEXT,
            TAGS.SPRING,
            TAGS.AZURE,
            TAGS.TAILWIND,
            TAGS.POSTGRESQL,
        ],
    },
    {
        title: "FilmSpringnitty",
        subtitle: "Portal de películas y críticas",
        description:
            "Proyecto de portal web clon de FilmAffinity. Realizado para la asignatura Frameworks Backend y Microservicios del máster DASW de la UAH. Tecnologías utilizadas: Spring Boot, Java, Thymeleaf, HTML, CSS, JavaScript, MySQL.",
        image: "https://placehold.co/400",
        github: "https://github.com/Javier-Gonzalez-Soldado/FilmSpringnitty",
        tags: [
            TAGS.SPRING,
            TAGS.THYMELEAF,
            TAGS.BOOTSTRAP,
            TAGS.JQUERY,
            TAGS.MYSQL,
        ],
    },
];
---

<!-- Modern Grid Container -->
<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 max-w-7xl mx-auto items-start">
    {
        PROJECTS.map((project, index) => (
            <article class="group relative transform transition-all duration-700 ease-out hover:scale-[1.02] h-full flex flex-col">
                <!-- Main Card Container -->
                <div class="relative bg-gradient-to-br from-primary/10 to-primaryDark/10
                    backdrop-blur-sm border border-primary/50 rounded-3xl overflow-hidden
                    shadow-xl shadow-primaryDark/20 group-hover:shadow-2xl group-hover:shadow-primaryDark/30
                    group-hover:border-primary/70 transition-all duration-500 h-full flex flex-col">

                    <!-- Subtle gradient overlay -->
                    <div class="absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0
                        group-hover:opacity-100 transition-opacity duration-500 z-10"></div>

                    <!-- Image Container -->
                    <div class="relative h-64 md:h-56 lg:h-64 overflow-hidden">
                        <!-- Image overlay for better text readability -->
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent z-20"></div>

                        <img
                            alt={`${project.title} preview`}
                            class="w-full h-full object-cover object-top transition-all duration-700
                                group-hover:scale-110 group-hover:brightness-110"
                            loading="lazy"
                            src={project.image}
                        />

                        <!-- Floating action buttons -->
                        <div class="absolute top-4 right-4 flex gap-2 z-30 opacity-0 group-hover:opacity-100
                            transform translate-y-4 group-hover:translate-y-0 transition-all duration-500 delay-100">
                            {project.github && (
                                <a
                                    href={project.github}
                                    class="flex items-center justify-center w-10 h-10 bg-slate-800/90
                                    text-secondary rounded-full hover:bg-slate-800 hover:scale-110 transition-all duration-300
                                    hover:shadow-lg hover:shadow-slate-500/50"
                                    title="View Source Code"
                                >
                                    <GitHubIcon class="w-5 h-5" />
                                </a>
                            )}
                            {project.link && (
                                <a
                                    href={project.link}
                                    class="flex items-center justify-center w-10 h-10 bg-dark bg-gradient-to-r from-primaryDark/60 to-primaryDark/50
                                    text-secondary rounded-full hover:from-primary/40 hover:to-primaryDark/30 hover:scale-110 transition-all duration-300
                                    hover:shadow-lg hover:shadow-primaryDark/50"
                                    title="Live Preview"
                                    target="_blank"
                                >
                                    <LinkIcon class="w-5 h-5" />
                                </a>
                            )}
                        </div>
                    </div>

                    <!-- Card Content -->
                    <div class="relative z-20 p-6 space-y-4 flex-1 flex flex-col">
                        <!-- Project Title -->
                        <h3 class="text-xl lg:text-2xl font-bold bg-gradient-to-r from-primary/80 to-primaryDark/80
                            bg-clip-text text-transparent leading-tight group-hover:from-primary group-hover:to-primaryDark
                            transition-all duration-300">
                            {project.title}
                        </h3>

                        <!-- Technology Tags -->
                        <div class="flex flex-wrap gap-2">
                            {project.tags.map((tag) => (
                                <span class={`
                                    inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium rounded-full
                                    ${tag.class} border shadow-sm
                                    hover:scale-105 hover:shadow-md transition-all duration-300 cursor-default
                                `}>
                                    <tag.icon class="w-3 h-3" />
                                    {tag.name}
                                </span>
                            ))}
                        </div>

                        <!-- Spacer to push buttons to bottom -->
                        <div class="flex-1"></div>
                        <!-- Project Description -->
                        <div class="text-sm lg:text-base leading-relaxed text-secondary/80
                            group-hover:text-secondary transition-colors duration-300"
                            title={project.description.length > 120 ? project.description : undefined}>
                            {
                                project.description.length > 120
                                    ? `${project.description.substring(0, 120)}...`
                                    : project.description
                            }
                        </div>
                        <!-- Spacer to push buttons to bottom -->
                        <div class="flex-1"></div>


                        <!-- Action buttons -->
                        <div class="flex items-center gap-3 pt-2">
                            {project.github && (
                                <a
                                    href={project.github}
                                    class="inline-flex items-center px-4 py-2 text-sm font-semibold text-secondary/80
                                    bg-gray-900/70 rounded-xl border border-gray-800 hover:bg-gray-900/80
                                    hover:text-secondary hover:scale-105 hover:shadow-md hover:shadow-gray-900 transition-all duration-300 group/btn"
                                    target="_blank"
                                >
                                    <GitHubIcon class="w-4 h-4 mr-2 group-hover/btn:rotate-12 transition-transform duration-300" />
                                    Code
                                </a>
                            )}
                            {project.link && (
                                <a
                                    href={project.link}
                                    class="inline-flex items-center px-4 py-2 text-sm font-semibold text-secondary
                                    bg-gradient-to-r from-primary/10 to-primaryDark/10 rounded-xl border border-primary/30
                                    hover:from-primary/15 hover:to-primaryDark/15 hover:scale-105 hover:shadow-md hover:shadow-primary/25
                                    transition-all duration-300 group/btn"
                                    target="_blank"
                                >
                                    <LinkIcon class="w-4 h-4 mr-2 group-hover/btn:rotate-12 transition-transform duration-300" />
                                    Preview
                                </a>
                            )}
                        </div>
                    </div>

                    <!-- Decorative elements -->
                    <div class="absolute -bottom-2 -right-2 w-24 h-24 bg-gradient-to-br from-primary/20 to-primaryDark/20
                        rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="absolute -top-2 -left-2 w-16 h-16 bg-gradient-to-br from-primary/20 to-primaryDark/20
                        rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-700 delay-200"></div>
                </div>
            </article>
        ))
    }
</div>

<style>
    /* Add custom scrollbar for better aesthetics */
    * {
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 0, 93, 0.5) transparent;
    }

    *::-webkit-scrollbar {
        width: 6px;
    }

    *::-webkit-scrollbar-track {
        background: transparent;
    }

    *::-webkit-scrollbar-thumb {
        background-color: rgba(255, 0, 93, 0.5);
        border-radius: 3px;
    }

    *::-webkit-scrollbar-thumb:hover {
        background-color: rgba(255, 0, 93, 0.5);
    }
</style>
