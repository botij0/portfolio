---
import CertificateIcon from "./icons/CertificateIcon.astro";

interface Props {
    degree: string;
    institution: string;
    period: string;
    description: string;
    gpa?: string;
    achievements?: string[];
}

const { degree, institution, period, description, gpa, achievements } =
    Astro.props;
---

<div
    class="group transition-all duration-500 ease-in-out hover:scale-[1.02] h-full flex flex-col"
>
    <!-- Timeline -->
    <div class="flex items-center">
        <div
            class="z-10 flex items-center justify-center w-6 h-6 rounded-full ring-0
            bg-primary/70 sm:ring-8 ring-primaryDark/50 shrink-0 group-hover:ring-primaryDark/60 group-hover:scale-110 transition-all duration-300"
        >
            <svg
                class="w-2.5 h-2.5 text-secondary"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                viewBox="0 0 20 20"
            >
                <path
                    d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1
                    1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
                ></path>
            </svg>
        </div>
        <div class="flex w-full h-0.5 bg-primary/20"></div>
    </div>
    <!-- Text Content -->
    <div class="mt-3 sm:pe-20 flex-1 flex flex-col">
        <!-- Degree -->
        <h3 class="text-xl font-semibold text-primary">
            {degree}
        </h3>

        <!-- Institution -->
        <h4 class="font-semibold text-lg text-primaryDark mb-3">
            {institution}
        </h4>

        <!-- Period -->
        <time
            class="inline-flex items-center px-3 py-1 text-sm font-medium w-fit
        bg-gradient-to-r from-blue-950/20 to-blue-800/20 backdrop-blur-sm
        text-secondary rounded-full border border-blue-950
        shadow-md shadow-blue-950/20 transition-all duration-500 group-hover:shadow-blue-950/40"
        >
            <svg
                class="w-4 h-4 mr-2 opacity-80 group-hover:opacity-100"
                fill="currentColor"
                viewBox="0 0 20 20"
            >
                <path
                    fill-rule="evenodd"
                    d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                    clip-rule="evenodd"></path>
            </svg>
            {period}
        </time>

        <!-- GPA if provided -->
        {
            gpa && (
                <div class="mt-3">
                    <span
                        class="inline-flex items-center gap-x-2 px-3 py-1 text-sm font-semibold
                                bg-gradient-to-r from-emerald-950/20 to-emerald-800/20
                                text-secondary border border-emerald-950 rounded-full
                                shadow-md shadow-emerald-950/20 group-hover:shadow-emerald-950/40"
                    >
                        <CertificateIcon class="w-4 h-4 opacity-80 group-hover:opacity-100" />
                        GPA: {gpa}
                    </span>
                </div>
            )
        }

        <!-- Description -->
        <div
            class="relative mt-5 p-6 rounded-2xl bg-gradient-to-br from-primary/5 to-primaryDark/5 backdrop-blur-sm border text-pretty text-sm
                border-primary/50 shadow-lg shadow-primaryDark/20 transition-all duration-500
                text-secondary group-hover:shadow-primary/20 group-hover:border-primary/70 flex-1"
        >
            {description}
            <!-- Achievements -->
            {
                achievements && achievements.length > 0 && (
                    <div class="relative z-10 mt-4">
                        <h5 class="text-sm font-semibold text-primary mb-2 flex items-center">
                            <svg
                                class="w-4 h-4 mr-2"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0
                                     001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z"
                                    clip-rule="evenodd"
                                />
                            </svg>
                            Logros destacados
                        </h5>
                        <ul class="space-y-1">
                            {achievements.map((achievement, index) => (
                                <li
                                    class="text-sm text-secondary/90 flex items-start
                                    group-hover:text-secondary transition-colors duration-300"
                                    style={`animation-delay: ${index * 0.1}s`}
                                >
                                    <span class="text-primary mr-2 text-xs">
                                        â–¸
                                    </span>
                                    {achievement}
                                </li>
                            ))}
                        </ul>
                    </div>
                )
            }
        </div>
    </div>
</div>

<style>
    @keyframes shimmer {
        0% {
            transform: translateX(-100%) skewX(-12deg);
        }
        100% {
            transform: translateX(200%) skewX(-12deg);
        }
    }

    @keyframes gradient {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }

    .animate-shimmer {
        animation: shimmer 2s ease-in-out infinite;
    }

    .animate-gradient {
        background-size: 200% 200%;
        animation: gradient 3s ease-in-out infinite;
    }
</style>
